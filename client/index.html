<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click Fit</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            color: white;
            text-align: center;
        }

        .container {
            margin-top: 50px;
        }

        #fact {
            margin-top: 20px;
            font-size: 20px;
            font-weight: bold;
            animation: fadeIn 2s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .dropzone {
            border: 2px dashed white;
            padding: 30px;
            margin-top: 20px;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.2);
        }
    </style>
</head>

<body>
    <div class="container">
        <h1 class="animate__animated animate__bounce">Welcome to Click Fit</h1>
        <p>Your ultimate destination for sports & fitness.</p>
        <div id="fact" class="alert alert-light">Loading a fun fact...</div>

        <div class="dropzone" id="dropzone">Drag & Drop Images Here or Click to Upload</div>
        <input type="file" id="fileInput" hidden>
    </div>

    <script>
        $(document).ready(function () {
            // Fetch fun fact using AJAX
            $.ajax({
                url: "http://numbersapi.com/1/30/date?json",
                method: "GET",
                success: function (data) {
                    $("#fact").text(data.text);
                },
                error: function () {
                    $("#fact").text("Could not load a fun fact.");
                }
            });

            // Handle file drag & drop
            let dropzone = $("#dropzone");
            let fileInput = $("#fileInput");
            dropzone.on("click", function () {
                fileInput.click();
            });
            dropzone.on("dragover", function (event) {
                event.preventDefault();
                dropzone.css("background-color", "rgba(255, 255, 255, 0.5)");
            });
            dropzone.on("dragleave", function () {
                dropzone.css("background-color", "rgba(255, 255, 255, 0.2)");
            });
            dropzone.on("drop", function (event) {
                event.preventDefault();
                dropzone.css("background-color", "rgba(255, 255, 255, 0.2)");
                let files = event.originalEvent.dataTransfer.files;
                uploadFile(files[0]);
            });
            fileInput.on("change", function () {
                uploadFile(fileInput[0].files[0]);
            });

            function uploadFile(file) {
                let formData = new FormData();
                formData.append("image", file);
                $.ajax({
                    url: "/upload",
                    method: "POST",
                    data: formData,
                    contentType: false,
                    processData: false,
                    success: function () {
                        alert("Image uploaded successfully!");
                    },
                    error: function () {
                        alert("Error uploading image.");
                    }
                });
            }
        });
    </script>
</body>

</html>